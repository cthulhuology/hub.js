<!HTML>
<html>
<head><title>Test Page</title></head>
<script src="Hub.js"></script>
<script src="Mouse.js"></script>
<style>
div { 
	position: absolute;
	top: 100px;
	left: 100px;
	border: 1px solid black;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	padding: 10;
}
</style>
<body>
<div id="test">This is a test</div>
</body>
<script>
Div = function(method,x,y,button) {
	var div = document.querySelector("#test")
	switch(method) {
	case 'down':
		if  ( x < div.offsetLeft || x > (div.offsetLeft + div.offsetWidth) || y < div.offsetTop || y > (div.offsetTop + div.offsetHeight)) return;
		div.dx = x - div.offsetLeft
		div.dy = y - div.offsetTop
		Hub('subscribe','move',this)
		Hub('subscribe','up',this)
		Hub('unsubscribe','down',this)
		return this
	case 'move':
		div.style.left = (x - div.dx) + 'px'
		div.style.top = (y - div.dy) + 'px'
		return this;
	case 'up':
		Hub('subscribe','down',this)	
		Hub('unsubscribe','move',this)	
		Hub('unsubscribe','up',this)	
		return this
	default:
		return this
	}
		
}
Hub('subscribe','down',Div)

</script>
</html>
